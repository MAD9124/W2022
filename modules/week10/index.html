<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Week 10: JWT Review | MAD9124</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Full Stack: API Development">
    
    <link rel="preload" href="/W2022/assets/css/0.styles.7a32498c.css" as="style"><link rel="preload" href="/W2022/assets/js/app.cec51691.js" as="script"><link rel="preload" href="/W2022/assets/js/3.9c2ff4f7.js" as="script"><link rel="preload" href="/W2022/assets/js/31.8fbfd6d3.js" as="script"><link rel="preload" href="/W2022/assets/js/11.f11acbbb.js" as="script"><link rel="prefetch" href="/W2022/assets/js/10.31dfe672.js"><link rel="prefetch" href="/W2022/assets/js/12.96649c49.js"><link rel="prefetch" href="/W2022/assets/js/13.535bc82d.js"><link rel="prefetch" href="/W2022/assets/js/14.028cb9d2.js"><link rel="prefetch" href="/W2022/assets/js/15.ced8bd8c.js"><link rel="prefetch" href="/W2022/assets/js/16.1ec56656.js"><link rel="prefetch" href="/W2022/assets/js/17.a48a571a.js"><link rel="prefetch" href="/W2022/assets/js/18.1528acad.js"><link rel="prefetch" href="/W2022/assets/js/19.61d8cc80.js"><link rel="prefetch" href="/W2022/assets/js/2.b4d63df3.js"><link rel="prefetch" href="/W2022/assets/js/20.4071399f.js"><link rel="prefetch" href="/W2022/assets/js/21.e5b3b049.js"><link rel="prefetch" href="/W2022/assets/js/22.8b4aae43.js"><link rel="prefetch" href="/W2022/assets/js/23.61c52980.js"><link rel="prefetch" href="/W2022/assets/js/24.55bc8f66.js"><link rel="prefetch" href="/W2022/assets/js/25.4ac50e54.js"><link rel="prefetch" href="/W2022/assets/js/26.9ce0e977.js"><link rel="prefetch" href="/W2022/assets/js/27.3a9bd92a.js"><link rel="prefetch" href="/W2022/assets/js/28.06fd6a07.js"><link rel="prefetch" href="/W2022/assets/js/29.1bb95a0c.js"><link rel="prefetch" href="/W2022/assets/js/30.dae4692c.js"><link rel="prefetch" href="/W2022/assets/js/32.68c3574f.js"><link rel="prefetch" href="/W2022/assets/js/33.617cdd3b.js"><link rel="prefetch" href="/W2022/assets/js/34.e9d21a2b.js"><link rel="prefetch" href="/W2022/assets/js/35.6e9bfe39.js"><link rel="prefetch" href="/W2022/assets/js/36.d4810b3d.js"><link rel="prefetch" href="/W2022/assets/js/37.8f7eb267.js"><link rel="prefetch" href="/W2022/assets/js/38.23784716.js"><link rel="prefetch" href="/W2022/assets/js/39.2e9e7983.js"><link rel="prefetch" href="/W2022/assets/js/4.a3d079e3.js"><link rel="prefetch" href="/W2022/assets/js/40.7f13d575.js"><link rel="prefetch" href="/W2022/assets/js/5.3200619b.js"><link rel="prefetch" href="/W2022/assets/js/6.4a9ec533.js"><link rel="prefetch" href="/W2022/assets/js/7.f496cd23.js"><link rel="prefetch" href="/W2022/assets/js/8.0225588a.js"><link rel="prefetch" href="/W2022/assets/js/9.665b29a5.js">
    <link rel="stylesheet" href="/W2022/assets/css/0.styles.7a32498c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/W2022/" class="home-link router-link-active"><!----> <span class="site-name">MAD9124</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/W2022/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/W2022/modules/" class="nav-link router-link-active">
  Modules
</a></div><div class="nav-item"><a href="/W2022/deliverables/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/W2022/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/W2022/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/W2022/modules/" class="nav-link router-link-active">
  Modules
</a></div><div class="nav-item"><a href="/W2022/deliverables/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/W2022/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deliverables</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Content Modules</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/W2022/modules/" aria-current="page" class="sidebar-link">Table of contents</a></li><li><a href="/W2022/modules/week1/" class="sidebar-link">Week 1: Introduction &amp; Review</a></li><li><a href="/W2022/modules/week2/" class="sidebar-link">Week 2: Node Modules &amp; Express</a></li><li><a href="/W2022/modules/week3/" class="sidebar-link">Week 3: RESTful APIs</a></li><li><a href="/W2022/modules/week4/" class="sidebar-link">Week 4: Middleware functions</a></li><li><a href="/W2022/modules/week5/" class="sidebar-link">Week 5: Data persistence</a></li><li><a href="/W2022/modules/week6/" class="sidebar-link">Week 6: Object Data Modelling</a></li><li><a href="/W2022/modules/week7/" class="sidebar-link">Week 7: Data security</a></li><li><a href="/W2022/modules/break-week/" class="sidebar-link">Break Week</a></li><li><a href="/W2022/modules/week9/" class="sidebar-link">Week 9: Access Control with JWT</a></li><li><a href="/W2022/modules/week10/" aria-current="page" class="active sidebar-link">Week 10: JWT Review</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#agenda" class="sidebar-link">Agenda</a></li><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#jwt-review" class="sidebar-link">JWT Review</a></li><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#enhance-jwt-security" class="sidebar-link">Enhance JWT security</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#set-an-expiry-limit-for-the-token" class="sidebar-link">Set an expiry limit for the token</a></li><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#set-the-expected-algorithm" class="sidebar-link">Set the expected algorithm</a></li><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#silently-refresh-tokens" class="sidebar-link">Silently refresh tokens</a></li><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#better-logout" class="sidebar-link">Better logout</a></li></ul></li><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#re-export-with-es-modules" class="sidebar-link">Re-export with ES Modules</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#create-a-new-aggregator-module" class="sidebar-link">Create a new aggregator module</a></li><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#import-from-this-new-module" class="sidebar-link">Import from this new module</a></li></ul></li><li class="sidebar-sub-header"><a href="/W2022/modules/week10/#for-next-week" class="sidebar-link">For next week</a></li></ul></li><li><a href="/W2022/modules/week11/" class="sidebar-link">Week 11: Consistent Error Handling</a></li><li><a href="/W2022/modules/week12/" class="sidebar-link">Week 12: Production Preparation</a></li><li><a href="/W2022/modules/week13/" class="sidebar-link">Week 13: Testing</a></li><li><a href="/W2022/modules/week14/" class="sidebar-link">Week 14: Production Deployment</a></li><li><a href="/W2022/modules/week15/" class="sidebar-link">Week 15: Final Lab</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1><span class="week">Week 10</span><br> <span class="title">JWT Review</span></h1> <div class="custom-block warning"><p class="custom-block-title">Assignment Reminder</p> <p><a href="/W2022/deliverables/assignment3.html">Assignment 3 - Authentication</a> - is due <strong>before</strong> 06:00 pm on Monday, March 28th.</p></div> <h2 id="agenda"><a href="#agenda" class="header-anchor">#</a> Agenda</h2> <ul><li>AMA (10 mins)</li> <li>Quiz (10 mins)</li> <li>A little more JWT (30 mins)</li> <li>Re-exporting with ES Modules (5 mins)</li> <li>Review Assignment 3 (5 mins)</li> <li><em>Lab Time</em></li></ul> <h2 id="jwt-review"><a href="#jwt-review" class="header-anchor">#</a> JWT Review</h2> <ol><li><p>Is the payload data in a JWT securely encrypted?<br>
No. It is a simple hash that can be easily decoded and is not suitable for transmitting sensitive information. However, the token is cryptographically signed, so we can be sure that it has not been altered in any way.</p></li> <li><p>Can a JWT be revoked?<br>
No. Once issued, a JWT cannot be revoked. It can be set with a short expiry time to limit the risk of a token being compromised.</p></li></ol> <h2 id="enhance-jwt-security"><a href="#enhance-jwt-security" class="header-anchor">#</a> Enhance JWT security</h2> <h3 id="set-an-expiry-limit-for-the-token"><a href="#set-an-expiry-limit-for-the-token" class="header-anchor">#</a> Set an expiry limit for the token</h3> <p>Without setting an expiry time for the JWT, it will be valid indefinitely. This is a very bad idea! Since the JWT acts as an <code>id_token</code> (see the <a href="https://openid.net/connect/" target="_blank" rel="noopener noreferrer">OpenID Connect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> specification), you should think of it as a permanently valid username/password combination. Therefore, it is highly recommended that you set a short TTL (time to live) for your tokens.</p> <h4 id="token-expiration-exp-claim"><a href="#token-expiration-exp-claim" class="header-anchor">#</a> <a href="https://github.com/auth0/node-jsonwebtoken#token-expiration-exp-claim" target="_blank" rel="noopener noreferrer">Token Expiration (exp claim)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p>The standard for JWT defines an <code>exp</code> claim for expiration. The expiration is represented as a standard timestamp, meaning an integer value in seconds since 1970-01-01T00:00:00Z UTC.</p> <div class="custom-block tip"><p class="custom-block-title">What is a claim?</p> <p>A 'claim' is a key name in the JWT payload object.</p></div> <p>Suppose we want to set the token to expire in one hour. It can be set directly with a manual calculation as part of the payload.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    exp<span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">,</span>
    uid<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_id <span class="token comment">// 'this' is an instance of the User model class</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'secret'</span>
<span class="token punctuation">)</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">Remember</p> <p>The <code>Date.now()</code> method returns the current time as a timestamp in milliseconds.</p></div> <p>Or, better yet, the expiration property can be set with a helper function in the <code>jsonwebtoken</code> library by setting the relative future value in the options object – expressed as a string like '2h' or '1d'.</p> <div class="language-js extra-class"><pre class="language-js"><code>jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>uid<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_id<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// payload</span>
  <span class="token string">'secret'</span><span class="token punctuation">,</span> <span class="token comment">// secret encryption key</span>
  <span class="token punctuation">{</span>expiresIn<span class="token operator">:</span> <span class="token string">'1h'</span><span class="token punctuation">}</span> <span class="token comment">// options object</span>
<span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Read more about the JWT signing options in the official repo.<br> <a href="https://github.com/auth0/node-jsonwebtoken" target="_blank" rel="noopener noreferrer">https://github.com/auth0/node-jsonwebtoken<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <h3 id="set-the-expected-algorithm"><a href="#set-the-expected-algorithm" class="header-anchor">#</a> Set the expected algorithm</h3> <p>When the server is verifying a token received from the client, the server should explicitly declare the expected hashing algorithm and not rely on the <code>alg</code> property in the header. You can find more background on this practice in the article, <em><a href="https://auth0.com/blog/critical-vulnerabilities-in-json-web-token-libraries" target="_blank" rel="noopener noreferrer">Critical vulnerabilities in JSON Web Token libraries<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em>.</p> <h4 id="set-the-algorithm-when-signing"><a href="#set-the-algorithm-when-signing" class="header-anchor">#</a> Set the algorithm when signing</h4> <p>The default algorithm used by the <code>jsonwebtoken</code> library to sign the token is <code>HS256</code>. This is an implementation of the Hash-Based Message Authentication Codes (HMAC) algorithm family using a SHA256 hash function.</p> <p>Even though this is the default, let's set that choice explicitly in the signing options object.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code>jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>uid<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_id<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// payload</span>
  <span class="token string">'secret'</span><span class="token punctuation">,</span> <span class="token comment">// secret encryption key</span>
  <span class="token punctuation">{</span>expiresIn<span class="token operator">:</span> <span class="token string">'1h'</span><span class="token punctuation">,</span> algorithm<span class="token operator">:</span> <span class="token string">'HS256'</span><span class="token punctuation">}</span> <span class="token comment">// options object</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Then while verifying the token when it is sent back to the server on an API request, you should explicitly set the verification options object to expect that same algorithm.</p> <div class="language-js extra-class"><pre class="language-js"><code>jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token string">'secret'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>algorithms<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'HS256'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Read more about the <a href="https://github.com/auth0/node-jsonwebtoken#jwtverifytoken-secretorpublickey-options-callback" target="_blank" rel="noopener noreferrer">additional verification options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in the official docs.</p> <div class="custom-block tip"><p class="custom-block-title">Notice</p> <p>The verification options object uses a pluralized key name, <code>algorithms</code>, which accepts an array of acceptable algorithms.</p></div> <h3 id="silently-refresh-tokens"><a href="#silently-refresh-tokens" class="header-anchor">#</a> Silently refresh tokens</h3> <p>Short lived tokens provide better security against tokens intercepted in transit. If a token is exposed, it will expire quickly and limit the potential abuse. But forcing your users to provide their username/password repeatedly while using your application does not deliver a positive user experience.</p> <p>One way to overcome this is to have the client application silently use the old token to request a new one. Typically this would be done via a POST request to the <code>/auth/tokens</code> resource path, sending the current/expired token in the header and an empty body. A short grace period can optionally be allowed for expired tokens.</p> <p>Once the client supplied token is verified, then a new token is generated and returned to the client. The client would then update it's application state and proceed with the user's requested action. The re-authentication process would be invisible to the user.</p> <p>If the client implementation proactively requests a new token before the old token has expired, the old token is added to the revoked token list so that it can no longer be used for either authentication or token refresh.</p> <h3 id="better-logout"><a href="#better-logout" class="header-anchor">#</a> Better logout</h3> <p>The simple implementation of client-side logout with a JWT is to clear it from active memory and the on-device cache, usually localStorage. A better implementation is to also send a RESTful API request to the server to register the user's explicit logout action.</p> <p>The server would then record that token as revoked. The JWT verification logic would need to be augmented to check against this table of revoked tokens. Because JWT verification needs to happen on every API call, the revoked token list is typically implemented with an in-memory database like Redis. Redis also has a built-in feature to automatically remove keys from a datastore after a set expiry time. This ensures that expired keys do not clutter up the datastore and the look-up task remains fast.</p> <h2 id="re-export-with-es-modules"><a href="#re-export-with-es-modules" class="header-anchor">#</a> Re-export with ES Modules</h2> <p>Sometimes it is useful to separate out sub-sets of certain modules into separate module files, but still make them available from a common module to make consuming them simpler. This is done by setting up the common module, or aggregator, to import the smaller modules and then re-export them.</p> <p>Take the model modules from our example application. It might be useful to be able to import several models at once, or all of the models in a single object.</p> <h3 id="create-a-new-aggregator-module"><a href="#create-a-new-aggregator-module" class="header-anchor">#</a> Create a new aggregator module</h3> <p>Start by creating a new <code>index.js</code> file in the <code>/models</code> folder. There are <a href="https://developer.mozilla.org/en-US/docs/web/javascript/reference/statements/export" target="_blank" rel="noopener noreferrer">several syntax options available<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, but the simplest is the <code>export..from</code> syntax.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// /models/index.js</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token keyword">default</span> <span class="token keyword">as</span> Car<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Car.js'</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token keyword">default</span> <span class="token keyword">as</span> Person<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Person.js'</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token keyword">default</span> <span class="token keyword">as</span> User<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./User.js'</span>
</code></pre></div><h3 id="import-from-this-new-module"><a href="#import-from-this-new-module" class="header-anchor">#</a> Import from this new module</h3> <p>Elsewhere in your application when you need to import multiple model classes, you can do it as named imports.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Car<span class="token punctuation">,</span> Person<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./models/index.js'</span>
<span class="token comment">// ...</span>
<span class="token keyword">const</span> cars <span class="token operator">=</span> <span class="token keyword">await</span> Car<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Or import all of the models in a single object.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> models <span class="token keyword">from</span> <span class="token string">'./models/index.js'</span>
<span class="token comment">// ...</span>
<span class="token keyword">const</span> cars <span class="token operator">=</span> <span class="token keyword">await</span> models<span class="token punctuation">.</span>Car<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="for-next-week"><a href="#for-next-week" class="header-anchor">#</a> For next week</h2> <p>Before next week's class, please read these additional online resources.</p> <ul><li><a href="https://philsturgeon.uk/api/2017/01/24/graphql-vs-rest-overview/" target="_blank" rel="noopener noreferrer">GraphQL vs REST<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.runscope.com/posts/you-might-not-need-graphql" target="_blank" rel="noopener noreferrer">You might not need GraphQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://philsturgeon.uk/api/2016/01/04/http-rest-api-file-uploads/" target="_blank" rel="noopener noreferrer">HTTP/REST API File Uploads<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="custom-block warning"><p class="custom-block-title">Quiz</p> <p>There will be a short quiz next class. The questions could come from any of the material referenced above.</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/13/2022, 6:38:34 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/W2022/modules/week9/" class="prev">
        Week 9: Access Control with JWT
      </a></span> <span class="next"><a href="/W2022/modules/week11/">
        Week 11: Consistent Error Handling
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/W2022/assets/js/app.cec51691.js" defer></script><script src="/W2022/assets/js/3.9c2ff4f7.js" defer></script><script src="/W2022/assets/js/31.8fbfd6d3.js" defer></script><script src="/W2022/assets/js/11.f11acbbb.js" defer></script>
  </body>
</html>
